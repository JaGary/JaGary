<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>淘宝详情页</title>
    <link rel="stylesheet" href="../font/iconfont.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            text-decoration: none;
        }

        body {
            margin-left: 20px;
            margin-top: 20px;
            height: 2000px;
        }

        ul,
        li {
            list-style: none;
        }

        #box-box {
            width: 1200px;
            height: 100%;
        }

        .imgs {
            width: 400px;
            height: 400px;
            float: left;
            cursor: pointer;
        }

        #box-box #box {
            float: left;
            margin-left: 20px;
        }

        #box-box #box .title {
            padding: 5px;
            font-size: 20px;
        }

        #box-box #box #price {
            color: red;
            font-size: 25px;
            padding: 10px;
        }

        #box-box #list {
            width: 700px;
            height: 70px;
            overflow: hidden;
        }

        #box-box #list li:hover {
            background-color: orange;
            color: #ff0036;
        }

        #box-box #list li:hover a {
            color: #fff;
        }

        .box1 {
            position: fixed;
            top: -20px;
            left: 20px;
        }

        #box-box #list li {
            float: left;
            width: 200px;
            height: 70px;
            background: #ccc;
            text-align: center;
            line-height: 50px;
            display: block;
            border-right: 1px solid #fff;
            font-size: 18px;
            margin-top: 20px;
            cursor: pointer;
        }

        #box-box #list li a {
            color: black;
        }

        #box-box #list span {
            float: left;
            width: 50px;
            height: 50px;
            background: #ccc;
            text-align: center;
            line-height: 50px;
            display: block;
            border-right: 1px solid #fff;
            font-size: 18px;
            margin-top: 20px;
        }

        #box-box #list span:hover {
            background-color: #ff0036;
            color: #fff;
        }

        #box-box #box .loc {
            height: 45px;
            width: 100%;
            display: flex;
            margin-top: 20px;
        }

        #box-box #box .loc span {
            color: #959595;
            margin-right: 20px;
        }

        #box-box #box .loc p {
            font-size: 18px;
            color: #959595;
        }

        #box-box #box .loc:hover p {
            color: #000;
        }

        #box-box #box .loc i {
            font-size: 10px;
            height: 10px;
            width: 10px;
            margin: 5px 0px 0px 5px;
        }

        #box-box #box .list1 {
            height: 60px;
            width: 100%;
            display: flex;
        }

        #box-box #box .list1 span {
            display: block;
            margin-right: 10px;
            font-size: 12px;
            color: #959595;
            margin-top: 5px;
        }

        #box-box #box .list1 li {
            font-size: 12px;
            height: 30px;
            width: 80px;
            border: 1px solid #ccc;
            line-height: 30px;
            text-align: center;
            margin-right: 10px;
            color: #cc5;
        }

        #box-box #box .list1 li:hover {
            background-color: orangered;
            color: #fff;
        }

        #box-box #box .list2 {
            width: 340px;
            height: 40px;
            display: flex;
            margin-top: 130px;
        }

        #box-box #box .list2 p {
            width: 170px;
            height: 100%;
            border: 1px solid #ff0036;
            font-size: 18px;
            line-height: 40px;
            text-align: center;
            color: #ff0036;
            margin-right: 10px;
        }

        #box-box #box .list2 p:hover {
            background: #ff0036;
            color: #fff;
        }

        #box-box #box .list2 i {
            font-size: 20px;
        }

        #box-box #box .cell {
            margin-bottom: 20px;
            width: 400px;
        }

        #box-box #box .cell p {
            display: inline-block;
        }

        .left {
            width: 200px;
            height: 350px;
            border: 1px solid #ccc;
            float: right;
        }

        .left .gold {
            width: 199px;
            height: 60px;
            background-image: url(../images/good.png);
            position: relative;
        }

        .left .gold .stile {
            display: block;
            width: 60px;
            height: 15px;
            background: #e54e00;
            font-size: 12px;
            line-height: 15px;
            text-align: center;
            position: absolute;
            top: 10px;
            right: 40px;
        }

        .left .gold .stile:hover {
            background: orange;
            color: #fff;
        }

        .left .signb {
            width: 118px;
            height: 30px;
            margin: auto;
        }

        .left .signb .sign-d {
            display: block;
            width: 16px;
            height: 18px;
            background: #ffa70e;
            font-size: 15px;
            color: #fff;
            margin-right: 7px;
        }

        .left .content {
            border-top: 1px solid #ffa70e;
            width: 100%;
            height: 150px;
        }

        .left .content .content-1 {
            width: 170px;
            height: 100%;
            border-bottom: 1px dashed #ccc;
            display: flex;
            flex-direction: column;
            text-align: center;
            margin-left: 18px;
        }

        .content-1 span {
            font-size: 15px;
            padding: 2px;
        }

        .left .content .content-2 {
            width: 150px;
            height: 30px;
            display: flex;
            margin-left: 40px;
            margin-top: 20px;
        }

        .content .content-2 li {
            width: 44px;
            height: 100%;
        }
        .left .content-3 p:hover{
            background-color: #e54e00;
            color: #fff;
        }
    </style>
</head>
<script src="../common.js"></script>

<body>
    <div id="box-box">
        <!-- <img src="../images/1.webp" alt="" class="imgs"> -->
        <!--<div id="box">
            <h4 class="title">ddd</h4>
            <span class="price">555</span>
            <div class="loc">
                <span>运费</span>
                <p>广州<i class="iconfont icon-xiajianjiao"></i></p>
                <p>荔湾区<i class="iconfont icon-xiajianjiao"></i></p>
            </div>
            <ul class="list1">
                <span>尺码</span>
                <li>S(165/84A)</li>
                <li>M(170/88A)</li>
                <li>L(175/96A)</li>
            </ul>
            <div class="cell">
                <span>购买数量</span>
                <input type="button" value="-" id="cut">
                <input type="text" id="cell-num" value="1">
                <input type="button" value="+" id="add">
                <p id="num">剩余:</p>
            </div>
            <div class="list2">
                <p>立即购买</p>
                <p><i class="iconfont icon-gouwuche3"></i>加入购物车</p>
            </div>
        </div>
        <div class="left">
            <div class="gold"><span class="stile">连续<span style="color:gold; ">99</span>期</span></div>
            <div class="signb" style="display: flex;"><span class="sign-d">店</span><span style="color:#e26204; "><span
                        style="color: orangered;">10</span>年老店</span></div>
            <div class="content">
                <div class="content-1">
                    <span style="font-weight: bold;margin-top: 10px;">罗家LuoJia</span>
                    <span>信誉：</span>
                    <span>掌柜：</span>
                    <span>联系：</span>
                    <span>资质：</span>
                </div>
                <ul class="content-2">
                    <li>
                        <p>描述</p>
                        <span></span><i></i>
                    </li>
                    <li>
                        <p>服务</p>
                        <span></span><i></i>
                    </li>
                    <li>
                        <p>物流</p>
                        <span></span><i></i>
                    </li>
                </ul>
                <div class="content-3" style="display: flex;text-align: center;">
                    <p style="width: 73px;height: 27px;border: 1px solid #ccc;margin-left: 20px;">进入店铺</p>
                    <p style="width: 73px;height: 27px;border: 1px solid #ccc;margin-left: 10px;">收藏店铺</p>
                </div>
            </div>
        </div>
        <ul id="list">
            <li><a href="">月销量</a></li>
            <li><a href="">评论</a></li>
            <li><a href="">好评率</a></li>
            <span>更多</span>
        </ul>
    -->
    </div>

</body>
<script>
    /*
        * 来到详情页，接收数据
        * 获取url，进行数据的提取 location.href location.search
        * 获取到的数据是参数->转成对象
        * encodeURI();//转码 浏览器自动转码
        * decodeURI();//解码
        * 渲染到详情页，就可以实现详情页的共享

        * 实际开发中，url不需要传太多的数据，传关键数据即可：
        * 商品id
        * 颜色

        */

    (function () {
        var box2 = document.getElementById('box-box');
        var imgs = document.getElementsByClassName('imgs');
        var str = decodeURI(location.search).slice(1);


        var data = strToObj(str);
        // console.log(html1);
        var html = `<img src="../images/1.webp" alt="" class="imgs">
            <div id="box">
                <h4 class="title">${data.title}</h4>
                <span id="price">价格 ￥${data.price}</span>
                <div class="loc">
                    <span>运费</span>
                    <p>广州<i class="iconfont icon-xiajianjiao"></i></p>
                    <p>荔湾区<i class="iconfont icon-xiajianjiao"></i></p>
                </div>
                <ul class="list1">
                    <span>尺码</span>
                    <li>${data.size}</li>
                    <li>${data.size1}</li>
                    <li>${data.size2}</li>
                </ul>
                <div class="cell">
                    <span>购买数量</span>
                    <input type="button" value="-" id="cut" style="width:20px;">
                    <input type="number" id="cell-num" value="1">
                    <input type="button" value="+" id="add" style="width:20px;">
                    <p id="num" style="margin-top:10px;">(库存:19)</p>
                </div>
                <div class="list2">
                    <p>立即购买</p>
                    <p><i class="iconfont icon-gouwuche3"></i>加入购物车</p>
                </div>
            </div>

            <div class="left">
                <div class="gold"><span class="stile">连续<span style="color:gold; ">99</span>期</span></div>
                <div class="signb" style="display: flex;"><span class="sign-d">店</span><span
                        style="color:#e26204; "><span style="color: orangered;">10</span>年老店</span></div>
                <div class="content">
                    <div class="content-1">
                        <span style="font-weight: bold;margin-top: 10px;">罗家LuoJia</span>
                        <span>信誉：</span>
                        <span>掌柜：</span>
                        <span>联系：</span>
                        <span>资质：</span>
                    </div>
                    <ul class="content-2">
                        <li>
                            <p>描述</p>
                            <span></span><i></i>
                        </li>
                        <li>
                            <p>服务</p>
                            <span></span><i></i>
                        </li>
                        <li>
                            <p>物流</p>
                            <span></span><i></i>
                        </li>
                    </ul>
                    <div class="content-3" style="display: flex;text-align: center;margin-top:20px;">
                        <p style="width: 73px;height: 27px;border: 1px solid #ccc;margin-left: 20px;line-height:27px;">进入店铺</p>
                        <p style="width: 73px;height: 27px;border: 1px solid #ccc;margin-left: 10px;line-height:27px;">收藏店铺</p>
                    </div>
                </div>
            </div>
            <ul id="list">
                <li><a href="">销量：${data.xiaoliang}</a></li>
                <li><a href="">累计评价：${data.pingjia}</a></li>
                <li><a href="">好评率：${data.goodl}%</a></li>
                <span>更多</span>
            </ul>`;
        console.log(html);
        // var box1 = document.getElementById('bo');
        box2.innerHTML = html;

        var list = document.getElementById('list');
        var alis = list.getElementsByTagName('li');
        window.onload = function () {

            var top = list.offsetTop;
            window.onscroll = function () {
                var scrollTop = window.scrollY;
                if (scrollTop >= top) {
                    list.className = 'box1';
                } else {
                    list.className = '';
                }
            }
        }

        var cell = document.getElementById('cell-num');
        var cut = document.getElementById('cut');
        var add = document.getElementById('add');
        var num = document.getElementById('num');
        var price = document.getElementById('price');


        add.onclick = function () {
            var val = cell.value * 1;
            cell.value = ++val;
            if (val >= 20) {
                cell.value = 20;
                val = 20;
            }
            num.innerHTML = `(库存:${20 - val})`;
            price.innerHTML = `￥${data.price*val}`
        }
        cut.onclick = function () {
            var val = cell.value * 1;
            cell.value = --val;
            if (val <= 1) {
                cell.value = 1;
                val = 1;
            }
            num.innerHTML = `(库存:${20 - val})`;
            price.innerHTML = `￥${data.price*val}`
        }
    })();
</script>

</html>